<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Quick Soil Sampling Data Summary With Python | Earth.etc </title> <meta name="author" content="Muhamad Nasir Lukman"> <meta name="description" content="Using pandas, matplotlib, and numpy to create a quick and dirty plot that summarized your data. Just enough to make your job easier."> <meta name="keywords" content="remote sensing, gis, image analysis, machine learning, geology, earth science, earth observation, geophysics, planetary science, satelite"> <meta property="og:site_name" content="Earth.etc"> <meta property="og:type" content="article"> <meta property="og:title" content="Earth.etc | Quick Soil Sampling Data Summary With Python"> <meta property="og:url" content="https://nasirlukman.github.io/blog/2021/SS-data-summary/"> <meta property="og:description" content="Using pandas, matplotlib, and numpy to create a quick and dirty plot that summarized your data. Just enough to make your job easier."> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Quick Soil Sampling Data Summary With Python"> <meta name="twitter:description" content="Using pandas, matplotlib, and numpy to create a quick and dirty plot that summarized your data. Just enough to make your job easier."> <script type="application/ld+json">
    {
        "author":
        {
            "@type": "Person",
            "name": "Muhamad Nasir Lukman"
        },
        "url": "https://nasirlukman.github.io/blog/2021/SS-data-summary/",
        "@type": "BlogPosting",
        "description": "Using pandas, matplotlib, and numpy to create a quick and dirty plot that summarized your data. Just enough to make your job easier.",
        "headline": "Quick Soil Sampling Data Summary With Python",
        
        "sameAs": ["https://github.com/nasirlukman", "https://www.linkedin.com/in/nasirlukman"],
        
        "name": "Muhamad Nasir Lukman",
        "@context": "https://schema.org"
    }
  </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nasirlukman.github.io/blog/2021/SS-data-summary/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Earth.etc </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/post/index.html">post </a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Quick Soil Sampling Data Summary With Python</h1> <p class="post-meta"> February 14, 2021 </p> <p class="post-tags"> <a href="/blog/2021"> <i class="fa-solid fa-calendar fa-sm"></i> 2021 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Geologists often use soil sampling methods in mineral exploration to gather information about element anomalies in the soil of a certain area. The output of this activity is a database containing coordinates and various element concentrations from the sample taken at that point. Before diving deep into the data and doing any fancy analysis, it is always a good idea to familiarize ourselves with the data by looking into the summary statistics and the general and spatial relationship of the data as a whole. By using Python we can write a simple code to get the summary statistics and some useful graphs to summarize the data in just a few minutes.</p> <p>We will use <code class="language-plaintext highlighter-rouge">pandas</code>, <code class="language-plaintext highlighter-rouge">numpy</code>, and <code class="language-plaintext highlighter-rouge">matplotib</code> libraries for this code, so let’s begin with importing our library</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div> <p>We can use <code class="language-plaintext highlighter-rouge">pandas</code> to read our dataset and put it into a variable called <em>data</em>. We can then use <code class="language-plaintext highlighter-rouge">head()</code> function from <code class="language-plaintext highlighter-rouge">pandas</code> to look at the first 5 rows of the data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">soil_data_example.csv</span><span class="sh">'</span><span class="p">)</span>
<span class="n">data</span><span class="p">.</span><span class="nf">head</span><span class="p">()</span>
</code></pre></div></div> <div> <style scoped="">.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>EASTING</th> <th>NORTHING</th> <th>Mg</th> <th>Al</th> <th>Si</th> <th>P</th> <th>S</th> <th>Cl</th> <th>Ca</th> <th>Ti</th> <th>...</th> <th>Cd</th> <th>Sn</th> <th>Sb</th> <th>W</th> <th>Hg</th> <th>Pb</th> <th>Bi</th> <th>Th</th> <th>U</th> <th>LE</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>803041</td> <td>9880671</td> <td>0.0</td> <td>0.0</td> <td>53.495</td> <td>86.0</td> <td>686.0</td> <td>149</td> <td>405.0</td> <td>6.244</td> <td>...</td> <td>0</td> <td>35</td> <td>0</td> <td>0</td> <td>0</td> <td>31.0</td> <td>0</td> <td>39</td> <td>0</td> <td>844.453</td> </tr> <tr> <th>1</th> <td>803137</td> <td>9880700</td> <td>0.0</td> <td>0.0</td> <td>53.272</td> <td>84.0</td> <td>660.0</td> <td>0</td> <td>461.0</td> <td>5.452</td> <td>...</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td>66.0</td> <td>0</td> <td>41</td> <td>4</td> <td>813.117</td> </tr> <tr> <th>2</th> <td>803055</td> <td>9880624</td> <td>0.0</td> <td>0.0</td> <td>57.548</td> <td>154.0</td> <td>621.0</td> <td>0</td> <td>203.0</td> <td>6.865</td> <td>...</td> <td>0</td> <td>95</td> <td>0</td> <td>0</td> <td>0</td> <td>41.0</td> <td>0</td> <td>37</td> <td>0</td> <td>831.336</td> </tr> <tr> <th>3</th> <td>803150</td> <td>9880652</td> <td>0.0</td> <td>0.0</td> <td>68.581</td> <td>101.0</td> <td>684.0</td> <td>0</td> <td>325.0</td> <td>6.396</td> <td>...</td> <td>0</td> <td>45</td> <td>0</td> <td>0</td> <td>0</td> <td>58.0</td> <td>0</td> <td>38</td> <td>0</td> <td>834.693</td> </tr> <tr> <th>4</th> <td>803070</td> <td>9880576</td> <td>0.0</td> <td>0.0</td> <td>73.638</td> <td>184.0</td> <td>758.0</td> <td>0</td> <td>251.0</td> <td>7.636</td> <td>...</td> <td>26</td> <td>126</td> <td>0</td> <td>0</td> <td>0</td> <td>68.0</td> <td>0</td> <td>31</td> <td>0</td> <td>819.252</td> </tr> </tbody> </table> <p>5 rows × 37 columns</p> </div> <blockquote> <p><em>Note: for this example, we use data with dummy coordinates.</em></p> </blockquote> <h2 id="summary-statistics">Summary statistics</h2> <p>By using <code class="language-plaintext highlighter-rouge">pandas</code>, getting summary statistics is as simple as this:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pd</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="sh">'</span><span class="s">display.max_columns</span><span class="sh">'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">data</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:].</span><span class="nf">describe</span><span class="p">()</span>
</code></pre></div></div> <div> <style scoped="">.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Mg</th> <th>Al</th> <th>Si</th> <th>P</th> <th>S</th> <th>Cl</th> <th>Ca</th> <th>Ti</th> <th>V</th> <th>Cr</th> <th>Mn</th> <th>Fe</th> <th>Co</th> <th>Ni</th> <th>Cu</th> <th>Zn</th> <th>As</th> <th>Se</th> <th>Rb</th> <th>Sr</th> <th>Y</th> <th>Zr</th> <th>Nb</th> <th>Mo</th> <th>Ag</th> <th>Cd</th> <th>Sn</th> <th>Sb</th> <th>W</th> <th>Hg</th> <th>Pb</th> <th>Bi</th> <th>Th</th> <th>U</th> <th>LE</th> </tr> </thead> <tbody> <tr> <th>count</th> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> <td>483.000000</td> </tr> <tr> <th>mean</th> <td>0.361609</td> <td>37.306886</td> <td>79.901859</td> <td>164.188741</td> <td>635.832406</td> <td>108.314700</td> <td>447.012607</td> <td>4.826319</td> <td>35.511387</td> <td>67.778468</td> <td>75.228035</td> <td>65.516644</td> <td>256.832961</td> <td>14.291925</td> <td>22.339545</td> <td>50.455487</td> <td>43.819876</td> <td>1.204969</td> <td>90.469979</td> <td>19.761905</td> <td>30.440994</td> <td>322.449275</td> <td>25.619048</td> <td>1.917184</td> <td>90.842650</td> <td>5.383023</td> <td>14.844720</td> <td>5.236025</td> <td>0.409938</td> <td>0.300207</td> <td>49.049996</td> <td>0.267081</td> <td>31.828157</td> <td>0.389234</td> <td>799.849393</td> </tr> <tr> <th>std</th> <td>2.524420</td> <td>19.170464</td> <td>21.018874</td> <td>105.011094</td> <td>116.399578</td> <td>166.519336</td> <td>364.993895</td> <td>1.125096</td> <td>27.704977</td> <td>72.420758</td> <td>132.400090</td> <td>48.937698</td> <td>266.687782</td> <td>16.964439</td> <td>21.153868</td> <td>42.358326</td> <td>47.032683</td> <td>1.866225</td> <td>53.418809</td> <td>14.534807</td> <td>7.541458</td> <td>108.510507</td> <td>6.765470</td> <td>5.917603</td> <td>78.306505</td> <td>10.428192</td> <td>67.141786</td> <td>22.061828</td> <td>2.077758</td> <td>1.339993</td> <td>89.163245</td> <td>2.859267</td> <td>13.579391</td> <td>1.446719</td> <td>40.073827</td> </tr> <tr> <th>min</th> <td>0.000000</td> <td>0.000000</td> <td>38.589000</td> <td>0.000000</td> <td>1.004000</td> <td>0.000000</td> <td>1.000000</td> <td>2.137000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>4.597000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>7.000000</td> <td>0.000000</td> <td>0.000000</td> <td>11.000000</td> <td>7.000000</td> <td>13.000000</td> <td>104.000000</td> <td>9.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>631.444000</td> </tr> <tr> <th>25%</th> <td>0.000000</td> <td>40.015500</td> <td>63.242000</td> <td>96.500000</td> <td>565.500000</td> <td>0.000000</td> <td>1.376500</td> <td>3.935000</td> <td>19.000000</td> <td>0.000000</td> <td>0.000000</td> <td>24.906500</td> <td>0.000000</td> <td>0.000000</td> <td>8.000000</td> <td>22.000000</td> <td>16.000000</td> <td>0.000000</td> <td>50.500000</td> <td>12.000000</td> <td>26.000000</td> <td>247.500000</td> <td>21.000000</td> <td>0.000000</td> <td>27.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>21.000000</td> <td>0.000000</td> <td>22.000000</td> <td>0.000000</td> <td>776.857500</td> </tr> <tr> <th>50%</th> <td>0.000000</td> <td>44.624000</td> <td>77.059000</td> <td>154.000000</td> <td>637.000000</td> <td>0.000000</td> <td>536.000000</td> <td>4.613000</td> <td>37.000000</td> <td>42.000000</td> <td>32.000000</td> <td>47.867000</td> <td>159.000000</td> <td>12.000000</td> <td>18.000000</td> <td>37.000000</td> <td>31.000000</td> <td>0.000000</td> <td>76.000000</td> <td>16.000000</td> <td>30.000000</td> <td>313.000000</td> <td>25.000000</td> <td>0.000000</td> <td>65.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>28.000000</td> <td>0.000000</td> <td>30.000000</td> <td>0.000000</td> <td>811.330000</td> </tr> <tr> <th>75%</th> <td>0.000000</td> <td>48.510000</td> <td>95.729000</td> <td>251.000000</td> <td>702.000000</td> <td>191.500000</td> <td>774.000000</td> <td>5.567500</td> <td>50.000000</td> <td>108.000000</td> <td>75.500000</td> <td>101.228000</td> <td>483.000000</td> <td>22.000000</td> <td>30.000000</td> <td>68.000000</td> <td>54.000000</td> <td>2.000000</td> <td>118.000000</td> <td>22.000000</td> <td>34.000000</td> <td>385.500000</td> <td>29.000000</td> <td>0.000000</td> <td>147.500000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>0.000000</td> <td>39.000000</td> <td>0.000000</td> <td>42.000000</td> <td>0.000000</td> <td>829.934000</td> </tr> <tr> <th>max</th> <td>22.825000</td> <td>77.831000</td> <td>150.081000</td> <td>465.000000</td> <td>970.000000</td> <td>830.000000</td> <td>999.000000</td> <td>9.502000</td> <td>337.000000</td> <td>385.000000</td> <td>896.000000</td> <td>243.907000</td> <td>989.000000</td> <td>232.000000</td> <td>145.000000</td> <td>490.000000</td> <td>455.000000</td> <td>12.000000</td> <td>309.000000</td> <td>149.000000</td> <td>59.000000</td> <td>735.000000</td> <td>45.000000</td> <td>96.000000</td> <td>351.000000</td> <td>55.000000</td> <td>827.000000</td> <td>223.000000</td> <td>22.000000</td> <td>12.000000</td> <td>867.000000</td> <td>45.000000</td> <td>66.000000</td> <td>13.000000</td> <td>865.822000</td> </tr> </tbody> </table> </div> <p>For practicality, <code class="language-plaintext highlighter-rouge">pandas</code> by default will not show the full range of rows and columns of our dataset. The first line of the code tells <code class="language-plaintext highlighter-rouge">pandas</code> to show the full range of the columns. In the second line, we use <code class="language-plaintext highlighter-rouge">iloc[:, 2:]</code> attribute to ignore the first two columns of our dataset because we don’t need summary statistics of the x and y coordinate (unless for some reason you do).</p> <h2 id="histograms">Histograms</h2> <p>Next, we will draw the histogram of each element’s concentration in the area. Because of the logarithmic nature of element concentration in the soil, we will plot the log concentration value into the histogram. Since we are dealing with a lot of 0’s, we will add a very small value to all the concentration data to make it easier with the logarithmic transformation. There are various ways to deal with zero values in the dataset, but for this example, let’s just add <code class="language-plaintext highlighter-rouge">0.0001</code> to all concentration data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:]</span><span class="o">+</span><span class="mf">0.0001</span><span class="p">)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">np.log</code> is a natural logarithm with base <em>e</em> if we want logarithm transformation with base <em>10</em> we can use <code class="language-plaintext highlighter-rouge">np.log10</code>. Now if we call <code class="language-plaintext highlighter-rouge">data.head()</code> we will see that that the concentration of each element already transformed into its logarithmic value.</p> <blockquote> <p><em>Note: code above will return an error if there are still zero values in the datasets. There are various ways to deals with <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">NaN</code> value in our dataset and it was up to you which method you will use for your case. You can also ignore this line if you don’t want to do any logarithmic transformation for your dataset</em></p> </blockquote> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="p">.</span><span class="nf">head</span><span class="p">()</span>
</code></pre></div></div> <div> <style scoped="">.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>EASTING</th> <th>NORTHING</th> <th>Mg</th> <th>Al</th> <th>Si</th> <th>P</th> <th>S</th> <th>Cl</th> <th>Ca</th> <th>Ti</th> <th>V</th> <th>Cr</th> <th>Mn</th> <th>Fe</th> <th>Co</th> <th>Ni</th> <th>Cu</th> <th>Zn</th> <th>As</th> <th>Se</th> <th>Rb</th> <th>Sr</th> <th>Y</th> <th>Zr</th> <th>Nb</th> <th>Mo</th> <th>Ag</th> <th>Cd</th> <th>Sn</th> <th>Sb</th> <th>W</th> <th>Hg</th> <th>Pb</th> <th>Bi</th> <th>Th</th> <th>U</th> <th>LE</th> </tr> <style type="text/css">table.dataframe{width:100%;height:240px;display:block;overflow:auto;font-family:Arial,sans-serif;font-size:13px;line-height:20px;text-align:center}table.dataframe th{font-weight:bold;padding:4px}table.dataframe td{padding:4px}table.dataframe tr:hover{background:#b8d1f3}</style> </thead> <tbody> <tr> <th>0</th> <td>803041</td> <td>9880671</td> <td>-9.21034</td> <td>-9.21034</td> <td>3.979590</td> <td>4.454348</td> <td>6.530878</td> <td>5.003947</td> <td>6.003887</td> <td>1.831637</td> <td>3.135499</td> <td>3.761202</td> <td>-9.210340</td> <td>3.880823</td> <td>4.543296</td> <td>2.302595</td> <td>2.302595</td> <td>4.219509</td> <td>4.060445</td> <td>-9.21034</td> <td>3.044527</td> <td>2.484915</td> <td>3.555351</td> <td>6.146329</td> <td>3.367299</td> <td>-9.21034</td> <td>3.713575</td> <td>-9.21034</td> <td>3.555351</td> <td>-9.21034</td> <td>-9.21034</td> <td>-9.21034</td> <td>3.433990</td> <td>-9.21034</td> <td>3.663564</td> <td>-9.210340</td> <td>6.738689</td> </tr> <tr> <th>1</th> <td>803137</td> <td>9880700</td> <td>-9.21034</td> <td>-9.21034</td> <td>3.975413</td> <td>4.430818</td> <td>6.492240</td> <td>-9.210340</td> <td>6.133398</td> <td>1.696001</td> <td>3.295841</td> <td>4.812185</td> <td>6.284134</td> <td>4.346828</td> <td>5.752573</td> <td>2.772595</td> <td>-9.210340</td> <td>4.700481</td> <td>4.709531</td> <td>-9.21034</td> <td>3.761202</td> <td>2.833219</td> <td>3.663564</td> <td>5.993962</td> <td>3.367299</td> <td>-9.21034</td> <td>4.174389</td> <td>-9.21034</td> <td>-9.210340</td> <td>-9.21034</td> <td>-9.21034</td> <td>-9.21034</td> <td>4.189656</td> <td>-9.21034</td> <td>3.713575</td> <td>1.386319</td> <td>6.700875</td> </tr> <tr> <th>2</th> <td>803055</td> <td>9880624</td> <td>-9.21034</td> <td>-9.21034</td> <td>4.052621</td> <td>5.036953</td> <td>6.431331</td> <td>-9.210340</td> <td>5.313206</td> <td>1.926451</td> <td>2.995737</td> <td>3.496511</td> <td>3.465739</td> <td>3.970464</td> <td>5.003947</td> <td>3.091047</td> <td>3.091047</td> <td>4.234108</td> <td>4.174389</td> <td>-9.21034</td> <td>2.772595</td> <td>2.564957</td> <td>3.610921</td> <td>6.208590</td> <td>3.496511</td> <td>-9.21034</td> <td>3.931828</td> <td>-9.21034</td> <td>4.553878</td> <td>-9.21034</td> <td>-9.21034</td> <td>-9.21034</td> <td>3.713575</td> <td>-9.21034</td> <td>3.610921</td> <td>-9.210340</td> <td>6.723034</td> </tr> <tr> <th>3</th> <td>803150</td> <td>9880652</td> <td>-9.21034</td> <td>-9.21034</td> <td>4.228017</td> <td>4.615122</td> <td>6.527958</td> <td>-9.210340</td> <td>5.783825</td> <td>1.855688</td> <td>3.178058</td> <td>-9.210340</td> <td>3.295841</td> <td>3.667786</td> <td>-9.210340</td> <td>2.890377</td> <td>-9.210340</td> <td>4.043053</td> <td>4.143136</td> <td>-9.21034</td> <td>3.295841</td> <td>2.833219</td> <td>3.610921</td> <td>6.122493</td> <td>3.367299</td> <td>-9.21034</td> <td>3.555351</td> <td>-9.21034</td> <td>3.806665</td> <td>-9.21034</td> <td>-9.21034</td> <td>-9.21034</td> <td>4.060445</td> <td>-9.21034</td> <td>3.637589</td> <td>-9.210340</td> <td>6.727064</td> </tr> <tr> <th>4</th> <td>803070</td> <td>9880576</td> <td>-9.21034</td> <td>-9.21034</td> <td>4.299163</td> <td>5.214936</td> <td>6.630684</td> <td>-9.210340</td> <td>5.525453</td> <td>2.032887</td> <td>3.806665</td> <td>4.248497</td> <td>-9.210340</td> <td>3.742731</td> <td>4.025353</td> <td>2.890377</td> <td>2.197236</td> <td>4.189656</td> <td>3.988986</td> <td>-9.21034</td> <td>2.890377</td> <td>2.708057</td> <td>3.688882</td> <td>6.272877</td> <td>3.555351</td> <td>-9.21034</td> <td>4.174389</td> <td>3.25810</td> <td>4.836283</td> <td>-9.21034</td> <td>-9.21034</td> <td>-9.21034</td> <td>4.219509</td> <td>-9.21034</td> <td>3.433990</td> <td>-9.210340</td> <td>6.708392</td> </tr> </tbody> </table> </div> <p>Next, we will use <code class="language-plaintext highlighter-rouge">matplotlib</code> to define our canvas and axes and then loop into each element in our dataset to plot each histogram.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>


<span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">col</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">data</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:].</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">x</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">element</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">].</span><span class="nf">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">35</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">].</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">"</span><span class="s">log </span><span class="sh">"</span> <span class="o">+</span> <span class="n">element</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">col</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">:</span>
        <span class="n">col</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">col</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">row</span><span class="o">+=</span><span class="mi">1</span>
        
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/img/SS_data_summary_files/SS_data_summary_16_0-480.webp 480w,/img/SS_data_summary_files/SS_data_summary_16_0-800.webp 800w,/img/SS_data_summary_files/SS_data_summary_16_0-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/img/SS_data_summary_files/SS_data_summary_16_0.png" class="img-fluid rounded" width="100%" height="auto" alt="A data table showing the first five rows of a soil geochemical dataset with coordinates and elemental concentration values such as Mg, Al, Si, P, and others." onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Image 1. Elements concentration (log ppm) </div> <p>The code above can be separated into two sections. The first section of the code will define the figure and axis canvas for our plot. Since we are dealing with 35 variables we will divide our subplots into 7 rows and 5 columns.</p> <p>We can check the length of our variable with:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sh">'''</span><span class="s">
it is getting annoying to keep typing data.iloc[:,2:] 
to get our elements so let</span><span class="sh">'</span><span class="s">s just put it into a
variable called grade
</span><span class="sh">'''</span>
<span class="n">grade</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">:]</span>
    
<span class="nf">len</span><span class="p">(</span><span class="n">grade</span><span class="p">.</span><span class="n">columns</span><span class="p">)</span>
</code></pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>35
</code></pre></div></div> <p>The second section of the code defines the loop behavior that will plot each histogram into predefined subplots.</p> <h2 id="correlation-matrix">Correlation Matrix</h2> <p>Our next figure will be a correlation matrix. This is a very useful and neat graph that will tell us the correlation coefficient of one variable with another variable within the dataset. The correlation matrix value ranges from -1 to 1, where:</p> <ul> <li>-1 = perfect negative correlation</li> <li>0 = no correlation</li> <li>1 = perfect positive correlation.</li> </ul> <p><code class="language-plaintext highlighter-rouge">Pandas</code> come in handy with its <code class="language-plaintext highlighter-rouge">corr()</code> function to calculate a correlation matrix of our dataset. Combine it with <code class="language-plaintext highlighter-rouge">matplotlib</code> functions such as: <code class="language-plaintext highlighter-rouge">matshow()</code> to draw the matrix into a figure; <code class="language-plaintext highlighter-rouge">cmap()</code> to denote it with colormap; and <code class="language-plaintext highlighter-rouge">colorbar()</code> to draw the legend, and we can get this informative graph.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cor_matrix</span> <span class="o">=</span> <span class="n">grade</span><span class="p">.</span><span class="nf">corr</span><span class="p">()</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="nf">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">.</span><span class="nf">matshow</span><span class="p">(</span><span class="n">cor_matrix</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="sh">'</span><span class="s">coolwarm</span><span class="sh">'</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ticks</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nf">len</span><span class="p">(</span><span class="n">grade</span><span class="p">.</span><span class="n">columns</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">colorbar</span><span class="p">(</span><span class="n">cax</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_xticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Correlation Matrix</span><span class="sh">'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_yticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_xticklabels</span><span class="p">(</span><span class="n">grade</span><span class="p">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="nf">set_yticklabels</span><span class="p">(</span><span class="n">grade</span><span class="p">.</span><span class="n">columns</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/img/SS_data_summary_files/SS_data_summary_22_0-480.webp 480w,/img/SS_data_summary_files/SS_data_summary_22_0-800.webp 800w,/img/SS_data_summary_files/SS_data_summary_22_0-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/img/SS_data_summary_files/SS_data_summary_22_0.png" class="img-fluid rounded" width="100%" height="auto" alt="Heatmap showing the correlation matrix between log-transformed elemental concentrations, where color intensity indicates the strength and direction of correlation between elements." onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Image 2. Elements concentration correlation matrix </div> <h2 id="map-plots">Map plots</h2> <p>With the same concept as the histogram plot, we can make quick and dirty map plots of our points to get a glimpse of the spatial correlation of each element. For this purpose, we use <code class="language-plaintext highlighter-rouge">scatter()</code> function with our UTM coordinates as its x and y value and denote the concentration value of each element to a color map using <code class="language-plaintext highlighter-rouge">cmap()</code>. We do this using <code class="language-plaintext highlighter-rouge">for</code> loop so it can loop to each <em>element</em> in our <code class="language-plaintext highlighter-rouge">grade</code> data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">rows</span><span class="o">=</span><span class="mi">0</span>
<span class="n">cols</span><span class="o">=</span><span class="mi">0</span> 
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">grade</span><span class="p">:</span>
    <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">].</span><span class="nf">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">EASTING</span><span class="sh">'</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="sh">'</span><span class="s">NORTHING</span><span class="sh">'</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">grade</span><span class="p">[</span><span class="n">element</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="sh">'</span><span class="s">coolwarm</span><span class="sh">'</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">].</span><span class="nf">set_xticklabels</span><span class="p">(</span><span class="sh">''</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">].</span><span class="nf">set_yticklabels</span><span class="p">(</span><span class="sh">''</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">].</span><span class="nf">set_title</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">].</span><span class="nf">axis</span><span class="p">(</span><span class="sh">'</span><span class="s">equal</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">fig</span><span class="p">.</span><span class="nf">colorbar</span><span class="p">(</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">rows</span><span class="p">,</span><span class="n">cols</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">cols</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">:</span>
        <span class="n">cols</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rows</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">2</span><span class="p">].</span><span class="nf">set_axis_off</span><span class="p">()</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/img/SS_data_summary_files/SS_data_summary_25_0-480.webp 480w,/img/SS_data_summary_files/SS_data_summary_25_0-800.webp 800w,/img/SS_data_summary_files/SS_data_summary_25_0-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/img/SS_data_summary_files/SS_data_summary_25_0.png" class="img-fluid rounded" width="100%" height="auto" alt="A set of spatial maps displaying the distribution of individual element concentrations across the survey area, with color gradients representing concentration levels." onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Image 3. Elements concentration map </div> <p>And that’s it. Your soil sampling data summary in just about a minute. You can download the full code on my <a href="https://github.com/nasirlukman/project-dump/tree/main" rel="external nofollow noopener" target="_blank">GitHub page</a> and reuse it for your next project. Hope it can save you the trouble and you can be more focused on your real geologist work. Have fun exploring!</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/Earthquake-Playthrough-01/">Earthquake Playthrough 01</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/Raster-Calculator/">Using Raster Calculator in QGIS GUI and Python Console to Make SR Blocks</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/EDA/">Exploratory Data Analysis (EDA) for Hyperspectral Imagery</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/distance/">Different Distance Metrics Example in Spectral Unmixing</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/bayes-unmixing/">Bayesian Spectral Unmixing</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Muhamad Nasir Lukman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: May 04, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?906085072389244b4db0c89c5b1dd28d" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-NY818B7N0G"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-NY818B7N0G");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>